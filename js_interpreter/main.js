const runBtn = document.getElementById("run_btn");
const codeEl = document.getElementById("input");
const outputEl = document.getElementById("output");

//this is the best interpreter ever

function err(e) {
    runBtn.innerText = e;
    codeEl.value = e;
    outputEl.innerText = e;
}

runBtn.addEventListener("click", function() {
    runBtn.innerText = "Run";
    let code = codeEl.value;
    outputEl.innerText = "";

    let mem = [0];
    let p = 0;
    for(let i = 0; i < code.length; i++) {
        if(code[i] === "+") {
            mem[p]++;
            if(mem[p] > 255) mem[p] = 0;
        } else if(code[i] === "-") {
            mem[p]--;
            if(mem[p] < 0) mem[p] = 255;
        } else if(code[i] === ">") {
            p++;
            if(p >= mem.length) mem.push(0);
        } else if(code[i] === "<") {
            p--;
            if(p < 0) err("U CANT GO TOO MUCH LEFT WITH THE POINTER");
        } else if(code[i] === ".") {
            outputEl.innerText += String.fromCharCode(mem[p]);
        } else if(code[i] === ",") {
            mem[p] = (prompt("ENTER THE CHARACTER:") ?? "\0").charCodeAt(0) ?? 0;
        } else if(code[i] === "[") {
            if(mem[p] === 0) {
                let inset = 0;
                for(let j = i; j < code.length; j++) {
                    if(code[j] === "]" && inset === 1) {
                        i = j;
                        break;
                    } else if(code[j] === "[") {
                        inset++;
                    } else if(code[j] === "]") {
                        inset--;
                    }
                }
            }
        } else if(code[i] === "]") {
            if(mem[p] !== 0) {
                let inset = 0;
                for(let j = i; j >= 0; j--) {
                    if(code[j] === "[" && inset === 1) {
                        i = j;
                        break;
                    } else if(code[j] === "]") {
                        inset++;
                    } else if(code[j] === "[") {
                        inset--;
                    }
                }
            }
        }
    }
});



codeEl.value = `>++++++[-<+++++++++++++>]<.>++++[-<++++++>]<-.>++++[-<++++>]<+.>++++[-<---->]<-.+++++++++++++.[-]>++++[-<++++++++>]<.>+++++[-<++++++++++++++>]<+.++++++++.-..-------------.[-]>++++[-<++++++++>]<.>+++++[-<++++++++++++++>]<+.++.+++++++++++++.>++++[-<---->]<-.[-]>++++[-<++++++++>]<.>++++++++[-<+++++++++++>]<+.----------.++++++.[-]>++++[-<++++++++>]<.>++++++[-<++++++++++++++>]<+.-----.[-]++++++++++.>++++++[-<+++++++++++>]<++.>++++[-<++++++>]<-.>++++[-<++++>]<+.>++++[-<---->]<-.+++++++++++++.[-]>++++[-<++++++++>]<.>+++++[-<++++++++++++++>]<+.++++++++.-..-------------.[-]>++++[-<++++++++>]<.>+++++[-<+++++++++++++++>]<+.-------.+++++++++++++++.[-]>++++[-<++++++++>]<.>++++++++[-<+++++++++++>]<+.----------.++++++.[-]>++++[-<++++++++>]<.>++++++[-<+++++++++++>]<++.+++++++++++.++++++++.---------.[-]++++++++++.>++++++[-<+++++++++++>]<++.>++++[-<++++++>]<-.>++++[-<++++>]<+.>++++[-<---->]<-.+++++++++++++.[-]>++++[-<++++++++>]<.>+++++[-<++++++++++++++>]<+.++++++++.-..-------------.[-]>++++[-<++++++++>]<.>+++++++++[-<+++++++++>]<+.+++.-------.[-]>++++[-<++++++++>]<.>+++++[-<+++++++++++++>]<.>++++[-<++++>]<+.---.++++++.-------.----------.[-]>++++[-<++++++++>]<.>+++++[-<+++++++++++++>]<.+++++++++++++.----------.[-]>++++[-<++++++++>]<.>++++++[-<+++++++++++>]<++.+.++++++++++++++.--------------.+++++++++++++.++.[-]>++++[-<++++++++>]<.>++++++++[-<+++++++++++>]<+.----------.++++++.[-]++++++++++.>++++++[-<+++++++++++>]<++.>++++[-<++++++>]<-.>++++[-<++++>]<+.>++++[-<---->]<-.+++++++++++++.[-]>++++[-<++++++++>]<.>+++++[-<++++++++++++++>]<+.++++++++.-..-------------.[-]>++++[-<++++++++>]<.>+++++++[-<+++++++++++>]<.------------.++++++++++.------.[-]>++++[-<++++++++>]<.>++++++++[-<+++++++++++>]<+.----------.++++++.[-]>++++[-<++++++++>]<.>++++++[-<+++++++++++>]<+.+++++++++++++++.+++++++.[-]++++++++++.>++++++[-<+++++++++++>]<++.>++++[-<++++++>]<-.>++++[-<++++>]<+.>++++[-<---->]<-.+++++++++++++.[-]>++++[-<++++++++>]<.>+++++[-<++++++++++++++>]<+.++++++++.-..-------------.[-]>++++[-<++++++++>]<.>++++++[-<++++++++++++++>]<-.>++++[-<---->]<--.>++++[-<++++++>]<.[-]>++++[-<++++++++>]<.>+++++[-<++++++++++++++>]<+.++++++++..-----------.--.>++++[-<++++++>]<-.>++++[-<----->]<.[-]++++++++++.>++++++[-<+++++++++++>]<++.>++++[-<++++++>]<-.>++++[-<++++>]<+.>++++[-<---->]<-.+++++++++++++.[-]>++++[-<++++++++>]<.>+++++[-<++++++++++++++>]<+.++++++++.-..-------------.[-]>++++[-<++++++++>]<.>++++++[-<++++++++++++++>]<.---------------.+++++++..[-]>++++[-<++++++++>]<.>+++++[-<+++++++++++++>]<.[-]>++++[-<++++++++>]<.>+++++[-<+++++++++++++++>]<+.---.----.[-]>++++[-<++++++++>]<.>+++++[-<+++++++++++++>]<.+++++++++++++.----------.[-]>++++[-<++++++++>]<.>++++++[-<++++++++++++>]<.+++++++++++++.---.++.[-]>++++[-<++++++++>]<.>++++++++[-<+++++++++++>]<+.----------.++++++.[-]`;